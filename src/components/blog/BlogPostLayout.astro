---
interface Props {
  title: string;
  pubDate: Date;
  author: string;
}

const { title, pubDate, author } = Astro.props;
---

<article class="prose-slate !max-w-none w-full poppins fade-in-up">
  <div class="relative">
    <div
      class="pointer-events-none absolute -top-5 left-3 -translate-x-1/2 sm:-top-7 sm:-left-7 sm:translate-x-0 h-12 w-12 sm:h-16 sm:w-16 rounded-xl border-2 border-black/80 bg-[#faff72] shadow-[4px_4px_0_0_#00000080] sm:shadow-[6px_6px_0_0_#000] -rotate-3"
      aria-hidden="true"
    >
    </div>
    <div
      class="relative z-0 border border-black/70 sm:border-2 rounded-xl sm:rounded-2xl px-4 sm:px-5 py-5 sm:py-6 md:p-8 shadow-[4px_4px_0_0_#00000066] sm:shadow-[8px_8px_0_0_#000] bg-white"
    >
      <slot />
    </div>
  </div>
</article>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const images = document.querySelectorAll('article img') as NodeListOf<HTMLImageElement>;
    
    images.forEach((img: HTMLImageElement) => {
      img.style.cursor = 'pointer';
      img.addEventListener('click', () => {
        // Create overlay
        const overlay = document.createElement('div');
        overlay.style.position = 'fixed';
        overlay.style.top = '0';
        overlay.style.left = '0';
        overlay.style.width = '100vw';
        overlay.style.height = '100vh';
        overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.9)';
        overlay.style.display = 'flex';
        overlay.style.alignItems = 'center';
        overlay.style.justifyContent = 'center';
        overlay.style.zIndex = '9999';
        overlay.style.cursor = 'zoom-out';
        
        // Create full-size image
        const fullImg = document.createElement('img');
        fullImg.src = img.src;
        fullImg.alt = img.alt;
        fullImg.style.maxWidth = '90vw';
        fullImg.style.maxHeight = '90vh';
        fullImg.style.objectFit = 'contain';
        
        overlay.appendChild(fullImg);
        document.body.appendChild(overlay);
        
        // Close on click or ESC
        const close = () => {
          document.body.removeChild(overlay);
        };
        
        overlay.addEventListener('click', close);
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') close();
        }, { once: true });
      });
    });
  });
</script>
